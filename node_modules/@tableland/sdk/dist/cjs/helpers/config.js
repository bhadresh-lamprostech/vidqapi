"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extractChainId = exports.extractSigner = exports.extractBaseUrl = exports.checkWait = void 0;
const chains_js_1 = require("./chains.js");
const ethers_js_1 = require("./ethers.js");
async function checkWait(config, receipt) {
    if (config.autoWait ?? false) {
        const waited = await receipt.wait();
        return { ...receipt, ...waited };
    }
    return receipt;
}
exports.checkWait = checkWait;
async function extractBaseUrl(conn = {}, chainNameOrId) {
    if (conn.baseUrl == null) {
        if (conn.signer == null) {
            if (chainNameOrId == null) {
                throw new Error("missing connection information: baseUrl, signer, or chainId required");
            }
            return (0, chains_js_1.getBaseUrl)(chainNameOrId);
        }
        const chainId = await conn.signer.getChainId();
        return (0, chains_js_1.getBaseUrl)(chainId);
    }
    return conn.baseUrl;
}
exports.extractBaseUrl = extractBaseUrl;
async function extractSigner(conn = {}, external) {
    if (conn.signer == null) {
        return await (0, ethers_js_1.getSigner)(external);
    }
    return conn.signer;
}
exports.extractSigner = extractSigner;
async function extractChainId(conn = {}) {
    const signer = await extractSigner(conn);
    const chainId = await signer.getChainId();
    if (chainId === 0 || isNaN(chainId) || chainId == null) {
        /* c8 ignore next 4 */
        throw new Error("cannot find chainId: is your signer connected to a network?");
    }
    return chainId;
}
exports.extractChainId = extractChainId;
//# sourceMappingURL=config.js.map